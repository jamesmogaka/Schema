{"url":"undefined","class":"database","cargs":"[\"tracker_mogaka\",false]","method":"get_sql_data","margs":"[\"# \\n# Explain the strategy for formulating the query???\\n\\nWITH \\n    # Get the contributions from the contributions table\\n    \/*\\n    type Icontribution = {\\n        contribution:number,\\n        summary: string,\\n        detail:string,\\n        intern: number,\\n        surname:string,\\n        minute:number,\\n        ref: string \/\/ A timestamp for identification purpouses\\n    }\\n    *\/\\n    contribution as (\\n        SELECT\\n            contribution.minute,\\n            json_arrayagg(\\n                json_object(\\n                    'contribution', contribution,\\n                    'summary', contribution.summary,\\n                    'detail', contribution.detail,\\n                    'intern', contribution.intern,\\n                    'surname',intern.surname,\\n                    'minute', contribution.minute,\\n                    'ref', contribution.ref\\n                )\\n            ) AS contributions\\n        FROM\\n            contribution\\n            INNER JOIN intern ON contribution.intern = intern.intern\\n        GROUP BY\\n            contribution.minute\\n            \\n    ),\\n    #\\n    #Get the raw minutes alongside the contributions\\n    \/*\\n    type Iminute = {\\n        minute: number,\\n        detail: string,\\n        numeral: number,\\n        summary: string,\\n        contributions: Array<Icontribution> \\n    }\\n     *\/\\n    minute as (\\n        SELECT\\n            minute.project,\\n            minute.presentation,\\n            json_arrayagg(\\n                json_object(\\n                    'minute', minute.minute,\\n                    'detail', minute.detail,\\n                    'numeral', minute.number,\\n                    'summary', minute.summary,\\n                    'contributions', contribution.contributions,\\n                    'owner', presentation.intern\\n                )\\n            ) AS minutes\\n        FROM\\n            minute\\n            LEFT JOIN contribution ON contribution.minute = minute.minute\\n            INNER JOIN presentation on minute.presentation = presentation.presentation\\n        WHERE minute.presentation = 62\\n        GROUP BY\\n            minute.project,\\n            minute.presentation\\n    ),\\n    #\\n    # Get the project data in the following json structure\\n    \/*\\n    type Iproject = {\\n        project: number, \/\/ The primary key\\n        name: string,\\n        problem: string,\\n        plan: string, \/\/ Guided by some strategy\\n        outcome: string, \/\/ Expectation\\n        minutes: Array<Iminute> \/\/ For monitoring and evaluation\\n    }\\n    *\/\\n    project as (\\n        SELECT\\n            minute.presentation,\\n            json_arrayagg(\\n                json_object(\\n                    'project', project.project,\\n                    'name', project.name,\\n                    'problem', project.problem,\\n                    'plan', project.plan,\\n                    'outcome', project.outcome,\\n                    'minutes', minute.minutes\\n                )\\n            ) AS data\\n        FROM \\n            project\\n            RIGHT JOIN minute ON minute.project = project.project\\n        GROUP BY \\n            minute.presentation\\n    )\\n\/*\\nIpresentation = {\\n    presentation: number,\\n    intern:number,\\n    surname:string,\\n    date:string,\\n    projects:Array<Iproject>,\\n}\\n*\/\\nSELECT\\n    presentation.presentation,\\n    presentation.intern,\\n    intern.surname,\\n    presentation.date,\\n    project.data as projects\\nFROM\\n    presentation\\n    INNER JOIN intern ON presentation.intern = intern.intern\\n    RIGHT JOIN project ON project.presentation = presentation.presentation\\n\\n\"]"}